import './index.scss';
import {NavLink, useLocation, useNavigate} from "react-router-dom";
import {useEffect, useRef, useState} from "react";
import {MdLogout} from "react-icons/md";
import {usePopup} from "../../../components/Popup/PopupContext.jsx";

const HrLeftBar = () => {
    const location = useLocation();
    const [productsOpen, setProductsOpen] = useState(false);
    const dropdownRef = useRef(null);

    // Eğer rota /superAdmin/products/... ise dropdown otomatik açık olsun
    useEffect(() => {
        if (location.pathname.startsWith("/superAdmin/products")) {
            setProductsOpen(true);
        }
    }, [location.pathname]);
    const showPopup = usePopup()
    const navigate = useNavigate();
    const handleLogout = () => {
        // Bütün cookies sil
        document.cookie.split(";").forEach(cookie => {
            const name = cookie.split("=")[0].trim();
            document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`;
        });
        showPopup("Sistemdən çıxış edildi","Hesabdan uğurla çıxış etdiniz.","success")
        // Ana səhifəyə yönləndir
        navigate('/');
    };
    return (
        <aside className="sidebar">
            <ul className="sidebar__menu-hr">
                <li className={location.pathname === "/superAdmin/statistik" ? "sidebar__menu-hr-item active" : "sidebar__menu-hr-item"}>
                    <span className="sidebar__menu-hr-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M19 7.5C20.3807 7.5 21.5 6.38071 21.5 5C21.5 3.61929 20.3807 2.5 19 2.5C17.6193 2.5 16.5 3.61929 16.5 5C16.5 6.38071 17.6193 7.5 19 7.5Z" stroke="black" stroke-width="1.5"/>
  <path d="M21.25 10V15.25C21.25 16.8413 20.6179 18.3674 19.4926 19.4926C18.3674 20.6179 16.8413 21.25 15.25 21.25H8.75C7.1587 21.25 5.63258 20.6179 4.50736 19.4926C3.38214 18.3674 2.75 16.8413 2.75 15.25V8.75C2.75 7.1587 3.38214 5.63258 4.50736 4.50736C5.63258 3.38214 7.1587 2.75 8.75 2.75H14" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
  <path d="M8.276 16.0356V11.6476M12.106 16.0356V8.76855M15.724 16.0356V10.5256" stroke="black" stroke-width="1.6" stroke-linecap="round"/>
</svg>
                    </span> <NavLink to={'/superAdmin/statistik'} className="link">
                    Statistikalar
                </NavLink>
                </li>
                <li className={location.pathname === "/hr/people" ? "sidebar__menu-hr-item active" : "sidebar__menu-hr-item"}>
                    <span className="sidebar__menu-hr-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <g clip-path="url(#clip0_1_28042)">
    <path d="M9.22511 22.399C8.61449 22.4631 8.00107 22.4969 7.38711 22.5C6.73211 22.5 6.57811 22.4525 6.04861 22.399C5.36361 22.329 4.84861 21.769 4.79361 21.0825L4.42011 16.42C4.00811 16.401 3.13811 16.38 2.81611 16.36C2.01511 16.3095 1.41711 15.6175 1.50911 14.82C1.72206 13.0041 2.1179 11.2143 2.69061 9.478C2.94611 8.708 3.61061 8.175 4.41961 8.108C5.10411 8.05 6.07911 8 7.38711 8C8.69511 8 9.67011 8.05 10.3541 8.1075C11.1621 8.1745 11.8271 8.7075 12.0826 9.4775C12.3564 10.3065 12.5899 11.1484 12.7821 12M14.5001 14.5C14.6041 13.9795 14.8126 13.407 14.9951 12.964C15.1966 12.474 15.6186 12.1115 16.1451 12.049C16.4289 12.0164 16.7144 12 17.0001 12C17.3286 12 17.6156 12.0205 17.8551 12.049C18.3816 12.1115 18.8036 12.474 19.0051 12.964C19.1876 13.407 19.3961 13.979 19.5001 14.5" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M10.6367 4.75C10.6367 5.61195 10.2943 6.4386 9.68482 7.0481C9.07532 7.65759 8.24867 8 7.38672 8C6.52477 8 5.69811 7.65759 5.08862 7.0481C4.47913 6.4386 4.13672 5.61195 4.13672 4.75C4.13672 3.88805 4.47913 3.0614 5.08862 2.4519C5.69811 1.84241 6.52477 1.5 7.38672 1.5C8.24867 1.5 9.07532 1.84241 9.68482 2.4519C10.2943 3.0614 10.6367 3.88805 10.6367 4.75ZM11.6102 16.075C11.6797 15.3475 12.2017 14.782 12.9277 14.6945C13.7407 14.596 15.0377 14.5 17.0002 14.5C18.9627 14.5 20.2602 14.596 21.0727 14.6945C21.7987 14.782 22.3207 15.3475 22.3902 16.075C22.4477 16.6835 22.5002 17.5075 22.5002 18.5C22.5002 19.4925 22.4477 20.3165 22.3902 20.925C22.3207 21.6525 21.7987 22.218 21.0727 22.3055C20.2597 22.404 18.9627 22.5 17.0002 22.5C15.0377 22.5 13.7402 22.4035 12.9277 22.3055C12.2017 22.218 11.6797 21.6525 11.6102 20.925C11.5358 20.1188 11.4991 19.3096 11.5002 18.5C11.5002 17.5075 11.5527 16.6835 11.6102 16.075Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </g>
  <defs>
    <clipPath id="clip0_1_28042">
      <rect width="24" height="24" fill="white"/>
    </clipPath>
  </defs>
</svg>
                    </span> <NavLink to={'/hr/people'} className="link">
                    İşçilər
                </NavLink>
                </li>
                <li className={location.pathname === "/hr/employment" ? "sidebar__menu-hr-item active" : "sidebar__menu-hr-item"}>
                    <span className="sidebar__menu-hr-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <g clip-path="url(#clip0_1_28049)">
    <path d="M0.75 14.25V23.25M9 18.75H12.75C13.5456 18.75 14.3087 19.0661 14.8713 19.6287C15.4339 20.1913 15.75 20.9544 15.75 21.75H0.75V15.75H6C6.79565 15.75 7.55871 16.0661 8.12132 16.6287C8.68393 17.1913 9 17.9544 9 18.75ZM9 18.75H6M7.25 12.75V5.75C7.25 5.21957 7.46071 4.71086 7.83579 4.33579C8.21086 3.96072 8.71957 3.75 9.25 3.75H21.25C21.7804 3.75 22.2891 3.96072 22.6642 4.33579C23.0393 4.71086 23.25 5.21957 23.25 5.75V12.75C23.25 13.2804 23.0393 13.7891 22.6642 14.1642C22.2891 14.5393 21.7804 14.75 21.25 14.75H11M7.25 7.75H23.25M15.25 7.75V9.75M18.25 3.75H12.25L12.611 1.586C12.6499 1.35199 12.7707 1.13943 12.9519 0.986292C13.1331 0.83315 13.3628 0.749401 13.6 0.750003H16.9C17.1367 0.750112 17.3657 0.834184 17.5462 0.987263C17.7268 1.14034 17.8472 1.3525 17.886 1.586L18.25 3.75Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </g>
  <defs>
    <clipPath id="clip0_1_28049">
      <rect width="24" height="24" fill="white"/>
    </clipPath>
  </defs>
</svg>
                    </span> <NavLink to={'/hr/employment'} className="link">
                    İşə qəbul
                </NavLink>
                </li>

                <li className={location.pathname === "/hr/salary" ? "sidebar__menu-hr-item active" : "sidebar__menu-hr-item"}>
                    <span className="sidebar__menu-hr-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M5.5 7C5.5 6.33696 5.76339 5.70107 6.23223 5.23223C6.70107 4.76339 7.33696 4.5 8 4.5C8.66304 4.5 9.29893 4.76339 9.76777 5.23223C10.2366 5.70107 10.5 6.33696 10.5 7C10.5 7.66304 10.2366 8.29893 9.76777 8.76777C9.29893 9.23661 8.66304 9.5 8 9.5C7.33696 9.5 6.70107 9.23661 6.23223 8.76777C5.76339 8.29893 5.5 7.66304 5.5 7ZM8 3C6.93913 3 5.92172 3.42143 5.17157 4.17157C4.42143 4.92172 4 5.93913 4 7C4 8.06087 4.42143 9.07828 5.17157 9.82843C5.92172 10.5786 6.93913 11 8 11C9.06087 11 10.0783 10.5786 10.8284 9.82843C11.5786 9.07828 12 8.06087 12 7C12 5.93913 11.5786 4.92172 10.8284 4.17157C10.0783 3.42143 9.06087 3 8 3ZM15.5 8C15.5 7.60218 15.658 7.22064 15.9393 6.93934C16.2206 6.65804 16.6022 6.5 17 6.5C17.3978 6.5 17.7794 6.65804 18.0607 6.93934C18.342 7.22064 18.5 7.60218 18.5 8C18.5 8.39782 18.342 8.77936 18.0607 9.06066C17.7794 9.34196 17.3978 9.5 17 9.5C16.6022 9.5 16.2206 9.34196 15.9393 9.06066C15.658 8.77936 15.5 8.39782 15.5 8ZM17 5C16.2044 5 15.4413 5.31607 14.8787 5.87868C14.3161 6.44129 14 7.20435 14 8C14 8.79565 14.3161 9.55871 14.8787 10.1213C15.4413 10.6839 16.2044 11 17 11C17.7956 11 18.5587 10.6839 19.1213 10.1213C19.6839 9.55871 20 8.79565 20 8C20 7.20435 19.6839 6.44129 19.1213 5.87868C18.5587 5.31607 17.7956 5 17 5ZM11.75 13C12.051 13 12.338 13.06 12.601 13.166C12.292 13.285 12.0098 13.4643 11.7707 13.6933C11.5315 13.9223 11.3403 14.1965 11.208 14.5H4.25C4.05109 14.5 3.86032 14.579 3.71967 14.7197C3.57902 14.8603 3.5 15.0511 3.5 15.25V15.507L3.507 15.587C3.514 15.661 3.53 15.775 3.562 15.916C3.628 16.197 3.76 16.572 4.021 16.945C4.514 17.65 5.578 18.5 8 18.5C9.407 18.5 10.355 18.213 11 17.835V19.496C10.209 19.808 9.223 20 8 20C5.172 20 3.61 18.975 2.792 17.805C2.36453 17.1905 2.09712 16.479 2.014 15.735C2.00697 15.6665 2.0023 15.5978 2 15.529V15.251C1.99987 14.9554 2.05797 14.6628 2.17098 14.3897C2.284 14.1166 2.44971 13.8684 2.65866 13.6594C2.8676 13.4503 3.11568 13.2845 3.38873 13.1714C3.66178 13.0582 3.95444 13 4.25 13H11.75ZM12 15.5C12 15.1022 12.158 14.7206 12.4393 14.4393C12.7206 14.158 13.1022 14 13.5 14H21.5C21.8978 14 22.2794 14.158 22.5607 14.4393C22.842 14.7206 23 15.1022 23 15.5V19.5C23 19.8978 22.842 20.2794 22.5607 20.5607C22.2794 20.842 21.8978 21 21.5 21H13.5C13.1022 21 12.7206 20.842 12.4393 20.5607C12.158 20.2794 12 19.8978 12 19.5V15.5ZM13 16V17C13.5304 17 14.0391 16.7893 14.4142 16.4142C14.7893 16.0391 15 15.5304 15 15H14C14 15.2652 13.8946 15.5196 13.7071 15.7071C13.5196 15.8946 13.2652 16 13 16ZM22 17V16C21.7348 16 21.4804 15.8946 21.2929 15.7071C21.1054 15.5196 21 15.2652 21 15H20C20 15.5304 20.2107 16.0391 20.5858 16.4142C20.9609 16.7893 21.4696 17 22 17ZM20 20H21C21 19.7348 21.1054 19.4804 21.2929 19.2929C21.4804 19.1054 21.7348 19 22 19V18C21.4696 18 20.9609 18.2107 20.5858 18.5858C20.2107 18.9609 20 19.4696 20 20ZM13 18V19C13.2652 19 13.5196 19.1054 13.7071 19.2929C13.8946 19.4804 14 19.7348 14 20H15C15 19.4696 14.7893 18.9609 14.4142 18.5858C14.0391 18.2107 13.5304 18 13 18ZM17.5 19.25C17.9641 19.25 18.4092 19.0656 18.7374 18.7374C19.0656 18.4092 19.25 17.9641 19.25 17.5C19.25 17.0359 19.0656 16.5908 18.7374 16.2626C18.4092 15.9344 17.9641 15.75 17.5 15.75C17.0359 15.75 16.5908 15.9344 16.2626 16.2626C15.9344 16.5908 15.75 17.0359 15.75 17.5C15.75 17.9641 15.9344 18.4092 16.2626 18.7374C16.5908 19.0656 17.0359 19.25 17.5 19.25Z" fill="black"/>
</svg>
                    </span> <NavLink to={"/hr/salary"} className="link">
                    İşçilərin maaş hesabatı
                </NavLink>
                </li>
                <li className={location.pathname === "/hr/director" ? "sidebar__menu-hr-item active" : "sidebar__menu-hr-item"}>
                    <span className="sidebar__menu-hr-icon">
                       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M15.1689 13.3301C16.7691 13.932 18.169 14.9802 19.2002 16.3555C20.1819 17.6648 20.7849 19.2117 20.9521 20.8281C20.9562 20.8677 20.9453 20.9021 20.9141 20.9346C20.8794 20.9704 20.8217 20.9999 20.75 21H3.25C3.17819 20.9999 3.12068 20.9704 3.08594 20.9346C3.05463 20.9021 3.04377 20.8677 3.04785 20.8281C3.21472 19.2115 3.81696 17.6639 4.79883 16.3545C5.83012 14.9792 7.23069 13.9317 8.83105 13.3301C8.88224 13.3108 8.97962 13.3205 9.04785 13.4229L10.96 16.292C11.4547 17.0341 12.5453 17.0341 13.04 16.292L14.9521 13.4229C15.0204 13.3206 15.1178 13.3108 15.1689 13.3301ZM12 3C13.094 3 14.1434 3.43442 14.917 4.20801C15.6906 4.9816 16.125 6.03098 16.125 7.125C16.125 8.21902 15.6906 9.2684 14.917 10.042C14.1434 10.8156 13.094 11.25 12 11.25C10.906 11.25 9.8566 10.8156 9.08301 10.042C8.30942 9.2684 7.875 8.21902 7.875 7.125C7.875 6.03098 8.30942 4.9816 9.08301 4.20801C9.8566 3.43442 10.906 3 12 3Z" stroke="black" stroke-width="1.5"/>
</svg>
                    </span> <NavLink to={"/hr/director"} className="link">
                    Direktor
                </NavLink>
                </li>
            </ul>
            <div>
                <button className={"logOut"} onClick={handleLogout}>
                    <MdLogout style={{
                        fontSize: "18px",
                    }}/>
                    <div>Çıxış et</div>
                </button>
            </div>
        </aside>
    )
        ;
};

export default HrLeftBar;